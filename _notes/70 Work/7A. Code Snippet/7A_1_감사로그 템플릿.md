---
created: ["2022-06-24 16:47"]
aliases: []
tags: []
comments: true
date created: 목요일, 7월 7일 2022, 8:14:40 오후
date modified: 금요일, 7월 8일 2022, 8:15:19 오전
---


# 작성일 : [[2022-06-24]]
# 상위 문서 : [[7.work/]]
# 분야 : #업무
# 키워드 : #CodeSnippet
# 상태 : #작성중, #연결중

---

```java
@RestController  
@RequestMapping("/member/api")  
@RequiredArgsConstructor  
public class MemberApiController {  
    private final MenuService memberService;
  
    @PostMapping("/")  
    public ResponseEntity<Object> addMmeber(@Valid MemberDto req, HttpServletRequest request) {  
        try {
	        memberservice.addMember(req, request);  
        } catch(ApiRequestException e) {
	        String json = LogUtil.converDtoToJson(MemberLog.builder()
		        .member(req.getMembername())
		        .birthDay(req.getBirthDate())
		        .phoneNumber(req.getPhoneNumber())
		        .errorCode(e.code)
		        .errorMessage(e.getMessage())
		        .build());
		    logService.insertLog(LogDto.builder().adminId(adminId).ip(ip).menuId(1).logTypeId(1).logContent(json).build());
		    return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(e.getErrorMessage());
        } finally {
        	String json = LogUtil.converDtoToJson(MemberLog.builder()
		        .member(req.getMembername())
		        .birthDay(req.getBirthDate())
		        .phoneNumber(req.getPhoneNumber())
		        .build());
		    logService.insertLog(LogDto.builder().adminId(adminId).ip(ip).menuId(1).logTypeId(1).logContent(json).build());
        }
        return ResponseEntity.noContent().build();  
    }
}
```

# ⏱히스토리
	- 2022-06-43 16:47 최초 작성
