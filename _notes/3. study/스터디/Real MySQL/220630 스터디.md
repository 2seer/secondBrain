---
created: ["2022-06-24 20:37"]
aliases: []
tags: []
start_read_page: 310
finish_read_page: 323
comments: true
---

# 220630 스터디
## 작성일 : [[2022-06-24]]
## 상위 문서 : [[Real MySQL]]
## 분야 : #SQL
## 키워드 : #옵티마이저와_힌트
## 상태 :  #작성중, #연결중 

![[Pasted image 20220624234215.png]]

## 9.2.5 DISTINCT 처리
> 특정 칼럼의 유니크한 값만 조회하려면 SELECT 쿼리에 DISTINCT를 사용한다. 

## 영향도
### 집계함수 유무에 따라 DISTINCT의 영향이 달라진다고 한다.

#### 1. 집계함수가 없는 경우
- ##### DISTINCT는  단순히 유니크한 레코드만 가져오고자 하는 경우에는 GROUP BY와 동일한 방식으로 처리가 되기는 하지만, 정렬이 되지 않는다는 차이가 있다.
- ##### 정렬 작업이 필요하지 않는다면 DISTINCT를 사용하는 것이 성능상 더 빠르다 할 수 있다.
```Mysql
SELECT DISTINCT emp_no FROM salaries;

SELECT emp_no FROM salaries GROUP BY emp_no;
```

- ####  주의할 것은  DISTINCT는 SELECT 되는 모든  컬럼들을 유니크하게  조회하는 것이지 컬럼을 조건하에 유니크하게 조회하는 것이 아니라는 점이다.
```MySql
SELECT DISTINCT first_name, last_name FROM employees; #1 쿼리

SELECT DISTINCT (first_name), last_name FROM employees; #2 쿼

# #2 쿼리는 first_name만 유니크하게 조회하고 last_name은 동일하게 조회하는 쿼리처림 보인다.
# 해당 쿼리는 에러 없이 실행되기 때문에 실수할 수 있는 부분이지만,
# MySQL은 DISTINCT라는 키워드가 있으면, SELECT되는 모든 컬럼들에 대해 DISTINCT를 적용하여 결과를 처리한다.
# 따라서 first_name만 유니크하게, last_name은 동일하게 조회하려고 한다면 GROUP BY로만 해결이 가능하다.
SELECT first_name, last_name FROM employees GROUP BY first_name;
```

#### 2.  집계 함수(COUNT, SUM, AVG, MIN, MAX, STDDEV, VARIANCE)와 함께 사용되는 경우
- 집합 함수 내에서 아용된 DISTINCT는 그 집합 함수의 인자로 전달된 칼럼값이 유니크한 것을 가져온다.
	- DISTINCT 처리가 인덱스를 사용하지 못 할때에는 임시테이블이 필요하다(왜?) 다만 실행 계획의 Extra 컬럼에서는 Useing temporary 메세지가 나오진 않는다.
	- 

> 사용처 :  선택한 필드에 중복데이터가 포함된 데이터를 생략하는데 사용
> 
>  
---
jsonString 으로 List형 DTO 변환하기
```Java

@PatchMapping(value = "/test1")
public ResponseEntity<Object> modAuditCategory(@Valid Dto req, HttpServletRequest request) throws JsonProcessingException {  
    ObjectMapper objectMapper = new ObjectMapper();  
    if (req.getJsnString() != null) {  
        Dto[] list = objectMapper.readValue(req.getJsnString(), Dto[].class);  
        for (Dto dto : list) {  
            dto.setMenuId(req.getMenuId());  
            memberService.mod(dto, request);  
        }    
    }    
    return ResponseEntity.noContent().build();  
}
```





## 주석
---
- 1


## ⏱히스토리
	- 2022-06-24 16:54 최초 작성
